@namespace Parcel.NET.Docs.Shared
@inject NavigationManager Navigation
@inject IJSRuntime JS

@if (Headings?.Count > 0)
{
    <aside class="on-this-page d-none d-xl-block">
        <h6 class="text-uppercase text-muted fw-bold small mb-2">On this page</h6>
        <nav>
            <ul class="list-unstyled">
                @foreach (var h in Headings)
                {
                    <li class="@(h.Level == 3 ? "ms-3" : "")">
                        <a href="#@h.Id" class="on-this-page-link text-decoration-none small"
                           @onclick="() => ScrollTo(h.Id)" @onclick:preventDefault>
                            @h.Text
                        </a>
                    </li>
                }
            </ul>
        </nav>
    </aside>
}

@code {
    [Parameter, EditorRequired] public List<HeadingInfo>? Headings { get; set; }

    private async Task ScrollTo(string id)
    {
        await JS.InvokeVoidAsync("ParcelNetDocs.scrollToElement", id);
    }
}
