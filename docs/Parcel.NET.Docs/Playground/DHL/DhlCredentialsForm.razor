@namespace Parcel.NET.Docs.Playground.DHL

<div class="mb-2">
    <span class="small fw-semibold text-muted">Shipping / Pickup / Returns</span>
</div>
<div class="row g-2">
    <div class="col-md-6">
        <label class="form-label small mb-0">API Key</label>
        <input type="text" class="form-control form-control-sm" value="@Credentials.ApiKey"
               @oninput="e => { Credentials.ApiKey = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">API Secret</label>
        <div class="input-group input-group-sm">
            <input type="@(_showSecret ? "text" : "password")" class="form-control form-control-sm" value="@Credentials.ApiSecret"
                   @oninput="e => { Credentials.ApiSecret = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
            <button class="btn btn-outline-secondary" type="button" @onclick="() => _showSecret = !_showSecret">
                @(_showSecret ? "Hide" : "Show")
            </button>
        </div>
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">Username</label>
        <input type="text" class="form-control form-control-sm" value="@Credentials.Username"
               @oninput="e => { Credentials.Username = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">Password</label>
        <div class="input-group input-group-sm">
            <input type="@(_showPassword ? "text" : "password")" class="form-control form-control-sm" value="@Credentials.Password"
                   @oninput="e => { Credentials.Password = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
            <button class="btn btn-outline-secondary" type="button" @onclick="() => _showPassword = !_showPassword">
                @(_showPassword ? "Hide" : "Show")
            </button>
        </div>
    </div>
</div>

<hr class="my-2" />
<span class="small fw-semibold text-muted">Tracking XML (Parcel DE v0)</span>
<div class="row g-2 mt-1">
    <div class="col-md-6">
        <label class="form-label small mb-0">Tracking Username (appname)</label>
        <input type="text" class="form-control form-control-sm" value="@Credentials.TrackingUsername"
               @oninput="e => { Credentials.TrackingUsername = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">Tracking Password</label>
        <div class="input-group input-group-sm">
            <input type="@(_showTrackingPw ? "text" : "password")" class="form-control form-control-sm" value="@Credentials.TrackingPassword"
                   @oninput="e => { Credentials.TrackingPassword = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
            <button class="btn btn-outline-secondary" type="button" @onclick="() => _showTrackingPw = !_showTrackingPw">
                @(_showTrackingPw ? "Hide" : "Show")
            </button>
        </div>
    </div>
</div>

<hr class="my-2" />
<span class="small fw-semibold text-muted">Internetmarke</span>
<div class="row g-2 mt-1">
    <div class="col-md-6">
        <label class="form-label small mb-0">Internetmarke Username</label>
        <input type="text" class="form-control form-control-sm" value="@Credentials.InternetmarkeUsername"
               @oninput="e => { Credentials.InternetmarkeUsername = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">Internetmarke Password</label>
        <div class="input-group input-group-sm">
            <input type="@(_showImPw ? "text" : "password")" class="form-control form-control-sm" value="@Credentials.InternetmarkePassword"
                   @oninput="e => { Credentials.InternetmarkePassword = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
            <button class="btn btn-outline-secondary" type="button" @onclick="() => _showImPw = !_showImPw">
                @(_showImPw ? "Hide" : "Show")
            </button>
        </div>
    </div>
</div>

<div class="small text-muted mt-2">
    API Key is shared across all DHL APIs. Credentials are stored in-memory only.
    Username/password are pre-filled with DHL sandbox defaults where available.
</div>

@code {
    [Parameter, EditorRequired] public DhlCredentials Credentials { get; set; } = new();
    [Parameter] public EventCallback OnChanged { get; set; }

    private bool _showSecret;
    private bool _showPassword;
    private bool _showTrackingPw;
    private bool _showImPw;
}
