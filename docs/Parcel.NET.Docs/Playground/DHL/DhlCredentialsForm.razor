@namespace Parcel.NET.Docs.Playground.DHL

<div class="row g-2">
    <div class="col-md-6">
        <label class="form-label small mb-0">API Key</label>
        <input type="text" class="form-control form-control-sm" value="@Credentials.ApiKey"
               @oninput="e => { Credentials.ApiKey = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">API Secret</label>
        <div class="input-group input-group-sm">
            <input type="@(_showSecret ? "text" : "password")" class="form-control form-control-sm" value="@Credentials.ApiSecret"
                   @oninput="e => { Credentials.ApiSecret = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
            <button class="btn btn-outline-secondary" type="button" @onclick="() => _showSecret = !_showSecret">
                @(_showSecret ? "Hide" : "Show")
            </button>
        </div>
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">Username</label>
        <input type="text" class="form-control form-control-sm" value="@Credentials.Username"
               @oninput="e => { Credentials.Username = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
    </div>
    <div class="col-md-6">
        <label class="form-label small mb-0">Password</label>
        <div class="input-group input-group-sm">
            <input type="@(_showPassword ? "text" : "password")" class="form-control form-control-sm" value="@Credentials.Password"
                   @oninput="e => { Credentials.Password = e.Value?.ToString() ?? string.Empty; OnChanged.InvokeAsync(); }" />
            <button class="btn btn-outline-secondary" type="button" @onclick="() => _showPassword = !_showPassword">
                @(_showPassword ? "Hide" : "Show")
            </button>
        </div>
    </div>
</div>
<div class="small text-muted mt-1">
    Credentials are stored in-memory only and discarded when you close this tab.
    Username and password are pre-filled with DHL sandbox defaults.
</div>

@code {
    [Parameter, EditorRequired] public DhlCredentials Credentials { get; set; } = new();
    [Parameter] public EventCallback OnChanged { get; set; }

    private bool _showSecret;
    private bool _showPassword;
}
